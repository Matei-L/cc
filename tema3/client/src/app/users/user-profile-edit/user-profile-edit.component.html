<div class="container">
  <div class="row">
    <div class="col-2">
    </div>
    <mat-card class="col-8 profile-box">
      <h1>Your profile</h1>

      <form class="d-flex">

        <div class="p-2 details-container">
          <mat-form-field class="full-width">
            <mat-label>Your Nickname</mat-label>
            <input name="nickname" [(ngModel)]="nickname"
                   required minlength="1" matInput #_nickname="ngModel">
          </mat-form-field>
          <div *ngIf="_nickname.invalid && (_nickname.dirty || _nickname.touched)"
               class="alert alert-danger" >
              Name is required.
          </div>
          <br>

          <div class="recording-container">
            <div class="d-flex">
              <button class="p-2" mat-raised-button *ngIf="!isRecording && !audioUrl" (click)="startRecording()">Start Recording</button>
              <button class="p-2" mat-raised-button *ngIf="isRecording && !audioUrl" (click)="stopRecording()">Stop Recording</button>
              <button class="p-2" mat-raised-button *ngIf="!isRecording && audioUrl" (click)="clearRecordedData()">Clear Recording</button>
              <div class="p-2 recording-time" *ngIf="isRecording && !audioUrl"> {{recordedTime}} </div>
            </div>
            <div class="audio-container">
              <audio class="full-width" *ngIf="!isRecording && audioUrl" controls>
                <source [src]="audioUrl" type="audio/webm">
              </audio>
            </div>
          </div>

          <br>
          <mat-form-field class="full-width">
            <mat-label>Your Description</mat-label>
            <textarea matInput [(ngModel)]="description" required minlength="1"
                      name="description" #_description="ngModel"></textarea>
          </mat-form-field>
          <div *ngIf="_description.invalid && (_description.dirty || _description.touched)"
               class="alert alert-danger" >
            Name is required.
          </div>
          <br>

          <button mat-raised-button (submit)="onSave()">Save</button>
        </div>
        <div class="p-2 photo-container">
          <img class="selected-image" [src]="photoUrl" alt="your profile image">
          <br>

          <button mat-raised-button><label for="fileInput">Choose photo</label></button>
          <input name="photo" hidden [appForbiddenPhotoUrl]="this.photoUrl" accept="image/*" (change)="onPhotoSelected($event)"
                 #_fileInput='ngModel' type="file" [(ngModel)]="chosenPhoto" id="fileInput">
          <div *ngIf="_fileInput.invalid"
               class="alert alert-danger" >
            Profile photo is required.
          </div>
        </div>
      </form>
    </mat-card>
    <div class="col-2">
    </div>
  </div>
</div>
